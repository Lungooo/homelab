---
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: securityheaders
  namespace: traefik
spec:
  headers:
    customResponseHeaders:
      Server: "" # prevent version disclosure
      X-Powered-By: "" # prevent version disclosure
      X-Forwarded-Proto: "https"
      Permissions-Policy: "accelerometer=(), autoplay=(), camera=(), cross-origin-isolated=(), display-capture=(), encrypted-media=(), fullscreen=(), geolocation=(), gyroscope=(), keyboard-map=(), magnetometer=(), microphone=(), midi=(), payment=(), picture-in-picture=(), publickey-credentials-get=(), screen-wake-lock=(), sync-xhr=(self), usb=(), web-share=(), xr-spatial-tracking=(), clipboard-read=(), clipboard-write=(), gamepad=(), hid=(), idle-detection=(), interest-cohort=(), serial=(), unload=()"
      Cross-Origin-Embedder-Policy: "require-corp"
      Cross-Origin-Opener-Policy: "same-origin"
      Cross-Origin-Resource-Policy: "same-origin"
      X-Permitted-Cross-Domain-Policies: "none"
    browserXssFilter: false # X-XSS-Protection â€“ deprecated
    contentTypeNosniff: true # X-Content-Type-Options
    frameDeny: true # X-Frame-Options
    sslRedirect: true
    forceSTSHeader: true # HTTP-Strict-Transport-Security (HSTS)
    stsIncludeSubdomains: true # HTTP-Strict-Transport-Security (HSTS)
    stsPreload: true # HTTP-Strict-Transport-Security (HSTS)
    stsSeconds: 31536000 # HTTP-Strict-Transport-Security (HSTS)
    referrerPolicy: no-referrer # Referrer-Policy
    # contentSecurityPolicy: "default-src 'self'; form-action 'self'; base-uri 'self'; object-src 'none'; frame-ancestors 'none'; upgrade-insecure-requests" # Content-Security-Policy
    sslProxyHeaders:
      X-Forwarded-Proto: https
